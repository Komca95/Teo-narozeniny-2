<script>
    // Firebase konfigurace
    const firebaseConfig = {
        apiKey: "AIzaSyAkLOermaWcOv5d656EDPQETjoOGmERKtw",
        authDomain: "teo-narozeniny-52be7.firebaseapp.com",
        databaseURL: "https://teo-narozeniny-52be7-default-rtdb.firebaseio.com",
        projectId: "teo-narozeniny-52be7",
        storageBucket: "teo-narozeniny-52be7.appspot.com",
        messagingSenderId: "795054861137",
        appId: "1:795054861137:web:9cd782b6f1b6235d3e8170",
        measurementId: "G-0GRPTFLG4M"
    };

    // Inicializace Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Rezervace dárku
    function reserveGift(id) {
        const button = document.getElementById(id);
        if (button.classList.contains('reserved')) {
            return; // Pokud už je rezervováno, neprováděj nic
        }

        db.ref('gifts/' + id).set(true, function(error) {
            if (error) {
                alert("Chyba při rezervaci!");
            } else {
                button.classList.add('reserved');
                button.innerText = 'Rezervováno';
                button.disabled = true;
            }
        });
    }

    // Aktualizace tlačítek podle stavu rezervace
    function updateGiftStatus(snapshot) {
        snapshot.forEach(childSnapshot => {
            const id = childSnapshot.key;
            const reserved = childSnapshot.val();
            const button = document.getElementById(id);
            if (button && reserved) {
                button.classList.add('reserved');
                button.innerText = 'Rezervováno';
                button.disabled = true;
            }
        });
    }

    window.onload = function() {
        db.ref('gifts').on('value', updateGiftStatus);
    };
</script>
