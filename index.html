<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teouškovy narozeniny</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .gift { display: inline-block; margin: 20px; padding: 20px; border: 1px solid #ccc; border-radius: 10px; width: 200px; }
        .gift img { width: 100%; height: auto; }
        .gift button { padding: 10px; margin-top: 10px; cursor: pointer; }
        .reserved { background-color: gray; cursor: not-allowed; }
    </style>
</head>
<body>
    <h1>Teouškovy narozeniny</h1>
    
    <div class="gift">
        <img src="https://i.imgur.com/dMBOStj.png" alt="Batůžek">
        <p><a href="https://www.ondalek.cz/lassig-tiny-backpack-about-friends-detsky-batoh-racoon/" target="_blank">Batůžek</a></p>
        <button id="gift1" onclick="reserveGift('gift1')">Rezervovat</button>
    </div>

    <script>
        // Firebase konfigurace
        const firebaseConfig = {
            apiKey: "AIzaSyAkLOermaWcOv5d656EDPQETjoOGmERKtw",
            authDomain: "teo-narozeniny-52be7.firebaseapp.com",
            databaseURL: "https://teo-narozeniny-52be7-default-rtdb.firebaseio.com",
            projectId: "teo-narozeniny-52be7",
            storageBucket: "teo-narozeniny-52be7.appspot.com",
            messagingSenderId: "795054861137",
            appId: "1:795054861137:web:9cd782b6f1b6235d3e8170",
            measurementId: "G-0GRPTFLG4M"
        };

        // Inicializace Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Funkce pro rezervaci dárku
        function reserveGift(id) {
            const giftRef = db.ref('gifts/' + id);
            giftRef.set(true).then(() => {
                console.log("Rezervace proběhla úspěšně!");
                document.getElementById(id).classList.add('reserved');
                document.getElementById(id).innerText = 'Rezervováno';
                document.getElementById(id).disabled = true;
            }).catch(error => {
                console.error("Chyba při rezervaci:", error);
            });
        }

        // Aktualizace statusu dárků
        function updateGiftStatus(snapshot) {
            snapshot.forEach(childSnapshot => {
                const id = childSnapshot.key;
                const button = document.getElementById(id);
                if (button) {
                    button.classList.add('reserved');
                    button.innerText = 'Rezervováno';
                    button.disabled = true;
                }
            });
        }

        // Načtení statusu dárků při načtení stránky
        window.onload = function() {
            db.ref('gifts').on('value', updateGiftStatus);
        }
    </script>
</body>
</html>
